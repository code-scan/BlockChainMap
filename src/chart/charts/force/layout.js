'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=layout;var _d3Force=require('d3-force'),force=_interopRequireWildcard(_d3Force),_lodash=require('lodash'),_lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function setSourceTarget(a){a[0]!==void 0&&a[0].source!==void 0&&a[0].target!==void 0||a.forEach(function(b){b.source=b.startId,b.target=b.endId})}function jugdeParam(a,b,c){setSourceTarget(b);var e=c.linkKey,f=c.center;return(e||(c.linkKey='id'),!f)?(console.error('center \u5FC5\u586B!'),!1):a?(a.forEach(function(g){g.fx=void 0,g.fy=void 0}),!!b||(console.error('links \u5FC5\u586B!'),!1)):(console.error('nodes \u5FC5\u586B!'),!1)}function layout(a,b,c){if(jugdeParam(a,b,c)){var e=c.distanceMin,f=c.distanceMax,g=c.distance,h=c.linkKey,i=c.center,j=c.rkey,k=c.interval,l=c.strength,m=force.forceSimulation();m.nodes(a),m.force('center',force.forceCenter(i[0],i[1]));var n=force.forceLink();m.force('link',n.id(function(q){return q[h]})),g&&(_lodash2.default.isFunction(g)?m.force('link',n.distance(function(q){return g(q)})):m.force('link',n.distance(g))),m.force('link').links(b);var o=force.forceManyBody();void 0!==l&&(o=o.strength(l)),void 0!==e&&(o=o.distanceMin(e)),void 0!==f&&(o=o.distanceMax(f)),m.force('charge',o);var p=force.forceCollide();return _lodash2.default.isFunction(k)?p.radius(function(q){return k(q)}):void 0!==k&&p.radius(k),j&&p.radius(function(q){return q[j]||10+k}),m.force('charge2',p),m.reset=function(q){void 0!==l&&(o=o.strength(l)),void 0!==e&&(o=o.distanceMin(e)),void 0!==f&&(o=o.distanceMax(f)),m.force('charge',o),m.force('center',force.forceCenter(i[0],i[1])),_lodash2.default.isFunction(k)?p.radius(function(r){return k(r)}):void 0!==k&&p.radius(k),j&&m.force('charge2',force.forceCollide().radius(function(r){return r[j]+(k||0)})),void 0!==k&&p.radius(k),m.alpha(void 0===q?1:q),m.restart()},m}}
